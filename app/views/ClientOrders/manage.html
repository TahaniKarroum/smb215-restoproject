#{extends 'stockMain.html' /} #{include 'include/tableWithFilterHead.html' /}
#{include 'include/formHead.html' /}
<div class="form-group">
	<h3>&{'Orders'}</h3>
	<hr class="text-primary">
</div>

#{if (clientordersList==null || clientordersList?.size()==0) }
<div class="panel panel-primary">
	<div class="panel-heading">
		<h3 class="panel-title">&{'Orders'}</h3>
	</div>
	<div class="panel-body">&{'Listisempty'}</div>
</div>
#{/if} #{else}

<div class="panel panel-primary filterable">
	<div class="panel-heading">
		<h3 class="panel-title">&{'Orders'} (${clientordersList?.size()})</h3>
	</div>
	<div id="accordion" role="tablist" aria-multiselectable="true">
	%{i=0}%
	#{list clientordersList, as:'order'} 

  <div class="card">
    <div class="card-header" role="tab" id="headingOne">
      <h5 class="mb-0">
      Order # ${order?.ordernb} 
        <a data-toggle="collapse" data-parent="#accordion" href="#collapse${i}" aria-expanded="true" aria-controls="collapse${i}">
     <span class="pull-right text-danger"> <b><u> Click here to view details</u></b></span>
        </a>
      </h5>
          <table class="table" >
          <tbody>
			<tr >
				<td style="border:0;!important"><b>Status : </b> ${order?.status}</td>
				<td style="border:0;!important"><b>Order Date : </b>${order?.orderDate?.format("dd/MM/yyy hh:mm a")} </td>
				<td style="border:0;!important"><b>Total : </b>${order?.total}$</td>
			</tr>
			</tbody>
          </table>
    </div>

    <div id="collapse${i}" class="collapse %{ if(i==0) out.print(''); }%  role="tabpanel" aria-labelledby="headingOne">
      <div class="card-block">
      <table class="table">
		<thead>
			<tr class="filters">
				<th>&{'Name'}</th>
				<th>&{'UnitPrice'}</th>
				<th>&{'Quantity'}</th>
				<th>&{'TotalPrice'}</th>
				<th width="25%"><span class="hidden-xs">&{'Action'}</span>
				</th>
			</tr>
		</thead>
		<tbody>	
      #{list order?.getListOrderProduct(), as:'orderproduct'} 
			<tr>
				<td>${orderproduct?.productname}</td>
				<td>${orderproduct?.unitPrice} $</td>
				<td>${orderproduct?.quantity} </td>
				<td>${orderproduct?.total} $</td>		
				<td></td>
			</tr>
       #{/list}
       </tbody>
       </table>
      </div>
    </div>
  </div>
  %{i=i+1}%
   #{/list}
</div>
</div>
#{include 'include/pagination.html' /}
#{include 'include/formValidation.html' /}
#{include 'include/deleteConfirmDialog.html' /} #{/else} 
